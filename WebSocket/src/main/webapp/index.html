<html >
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="resource/jquery-3.2.1.min.js"></script>
	</head>
	<body>
		<h2>WebSocket客户端</h2>
		 <div class="input-prepend">
        		<span class="add-on">昵称</span>
        		<input class="nickName"  type="text" >
        		<span class="add-on"  id="connection">建立连接</span>
		</div>
		
		<div >
				<textarea rows="20" cols="20"></textarea>		
				<button class="btn btn-lg btn-primary">
					发送
				</button>
				<button class="btn btn-lg btn-danger">下线</button>
		</div>
		
		
		<script type="text/javascript">
		var ws=null;
		var nickName=null;
			$("#connection").click(){
				var nickName=$(".nickName").val();
				if(nickName==null){
					alert("请为自己起一个碉堡天的名字吧");
					return;
				}
			}
		
		
			var ws=new WebSocket("ws://127.0.0.1:9090/WebSocket/echo");
			ws.onopen = function (){
				ws.send("Test!");
			};
			ws.onmessage = function(evt){
				console.log(evt.data);
			}; 
			ws.onclose = function(evt){
					console.log("WebSocketClosed!");
			}; 
			ws.onerror = function(evt){
				console.log("WebSocketError!");
			};
			$(".send").click(function(){
				var msg= $(".msg").val;
				ws.send(msg);
			});
			$(".offline").click(function(){
				ws.close("主动关闭连接")
			})
		</script>
	</body>
</html>
